{
    $(document).ready(function () {
       
       
        //var AS = document.getElementById("AutoGeneratedID");
       



        console.log("Purchase order ready!");
        

        var catdeletionactionId = "";
        function randomCategoryGUIDvals() {
            return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
                (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
            );
        }

        //var AS = document.getElementById("AutoGeneratedID");
        catdeletionactionId = randomCategoryGUIDvals();

        var categoriesValues = new Array(0);

        console.log("running fetch..");
            $.get('http://localhost:46568/api/PurchaseOrders').done(function (items) {
                var json = JSON.stringify(items);
                categoriesValues = items;
                console.table(categoriesValues);

                $.each(items, function (i, item) {
                    var item =
                        `<tr>
                        <td class="dropdown-primary dropdown open"> 
                        <button class="btn btn-primary dropdown-toggle waves-effect waves-light " type="button" id="dropdown-2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Modify</button>
                            <div class="dropdown-menu" aria-labelledby="dropdown-2" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
 
                                <a class="dropdown-item waves-light waves-effect" href="/PurchaseOrder/NewPurchaseOrder">New Purchase Order</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item waves-light waves-effect" id="${item.poId}" onclick=DetailsById(this.id)>Details</a>
                                <a class="dropdown-item waves-light waves-effect" id="${item.poId}" onclick=EditByInventoryItem(this.id)>Edit</a>
                                <a class="dropdown-item waves-light waves-effect" id="${item.poId}" onclick=DeletePOById(this.id)>Delete</a>
                               
                            </div>
                        </td>
                        <td>${item.PuchaseOrderNumber}</td>
                        <td>${item.shipToCompanyName}</td>
                        <td>${item.poDate}</td>
                        <td>${item.vendorName}</td>
                        <td>${item.puchaseOrderNumber}</td>
                        <td>${item.poDate}</td>
                        <td>${item.quantity}</td>
                        <td>${item.unitrice}</td>
                        <td>${item.modifiedBy}</td>
                        <td>${item.amount}</td>
                        
                      <tr>`;
                    $('#itemlist').append(item);


                });


                function DeletePOById(Id) {
                    alert("Are you sure you want to delete this PO?", Id);
                }

            });
        
        function DeletePOById(Id) {
            alert("Are you sure you want to delete this PO?", Id);


            alert("Category deletion Initiated ... ");
            $.ajax({
                type: 'DELETE',
                url: 'http://localhost:46568/api/PurchaseOrders/' + Id,
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8', // when we use .serialize() this generates the data in query string format. this needs the default contentType (default content type is: contentType: 'application/x-www-form-urlencoded; charset=UTF-8') so it is optional, you can remove it
                data: Id,
                success: function (result) {



                    alert('Item successfuly Deleted ');
                    let current = new Date();
                    let cDate = current.getFullYear() + '-' + (current.getMonth() + 1) + '-' + current.getDate();
                    let cTime = current.getHours() + ":" + current.getMinutes() + ":" + current.getSeconds();
                    let dateTime = cDate + ' ' + cTime;

                    randomCategoryGUID();
                    const dataValues =
                    {
                        "id": catdeletionactionId,
                        "date": dateTime,
                        "activityName": "PO Deletion:",
                        "activityDetails": poId,
                        "actionedBy": "Dummy-User"
                    }
                    LogUserActivity(dataValues);
                    window.location.reload();


                },
                error: function () {
                    alert('Failed to Delete the Category');
                    console.log('Failed ');
                }
            })
        }



        
    })
}